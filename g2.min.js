/**
 * g2 (c) 2013-15 Stefan Goessner
 * @license
 * MIT License
 */
Math.hypot=Math.hypot||function(t,e){return Math.sqrt(t*t+e*e)};function g2(){if(this instanceof g2)return this.constructor.apply(this,arguments);else return g2.apply(Object.create(g2.prototype),arguments)}g2.version="2.0.0";g2.transparent="rgba(0, 0, 0, 0)";g2.exeStack=0;g2.proxy=Object.create(null);g2.ifc=Object.create(null);g2.ifcof=function(t){for(var e in g2.ifc)if(g2.ifc[e](t))return e;return false};g2.prototype.constructor=function t(e){if(e){this.state=g2.State.create(this);if(e.zoom)this.zoom(e.zoom.scl,e.zoom.x,e.zoom.y);if(e.pan)this.pan(e.pan.dx,e.pan.dy);if(e.trf)this.trf(e.trf.x,e.trf.y,e.trf.scl);if(e.cartesian)this.state.cartesian=e.cartesian}this.cmds=[];return this};g2.prototype.cartesian=function e(){this.getState().cartesian=true;return this};g2.prototype.pan=function s(t,e){this.getState().trf0.x+=t;this.state.trf0.y+=e;return this};g2.prototype.zoom=function i(t,e,s){this.getState().trf0.x=(1-t)*(e||0)+t*this.state.trf0.x;this.state.trf0.y=(1-t)*(s||0)+t*this.state.trf0.y;this.state.trf0.scl*=t;return this};g2.prototype.trf=function n(t,e,s){this.getState().trf0.x=t;this.state.trf0.y=e;this.state.trf0.scl=s;return this};g2.prototype._curPnt=function(){var t=this.cmds.length&&this.cmds[this.cmds.length-1]||false;return t&&(t.cp||t.a)};g2.prototype.findCmdIdx=function(t){for(var e=this.cmds.length-1;e>=0;e--)if(t(this.cmds[e],e,this.cmds))return e;return 0};g2.prototype.p=function r(){this.cmds.push({c:r});return this};g2.prototype.m=function o(t,e){this.cmds.push({c:o,a:[t,e]});return this};g2.prototype.l=function a(t,e){this.cmds.push({c:a,a:[t,e]});return this};g2.prototype.q=function c(t,e,s,i){this.cmds.push({c:c,a:[t,e,s,i],cp:[s,i]});return this};g2.prototype.c=function h(t,e,s,i,n,r){this.cmds.push({c:h,a:[t,e,s,i,n,r],cp:[n,r]});return this};g2.prototype.a=function f(t,e,s){var i=this._curPnt();if(i){var n=e-i[0],r=s-i[1],o=Math.tan(t/2),a=n/2-r/o/2,c=r/2+n/o/2,h=Math.atan2(-c,-a);this.cmds.push({c:f,a:[i[0]+a,i[1]+c,Math.hypot(a,c),h,h+t,t<0],cp:[e,s]})}return this};g2.prototype.z=function l(){this.cmds.push({c:l});return this};g2.prototype.stroke=function p(t){this.cmds.push(t?{c:p,a:[t]}:{c:p});return this};g2.prototype.fill=function u(t){this.cmds.push(t?{c:u,a:[t]}:{c:u});return this};g2.prototype.drw=function g(t){this.cmds.push(t?{c:g,a:[t]}:{c:g});return this};g2.prototype.txt=function d(t,e,s,i,n){this.cmds.push({c:d,a:n?[this,t,e||0,s||0,i||0,n]:[this,t,e||0,s||0,i||0]});return this};g2.prototype.img=function y(t,e,s,i,n,r,o,a,c){var h=new Image,f=this.getState();f.loading++;h.onload=function l(){f.loading--};h.onerror=function(){h.src=g2.prototype.img.broken};h.src=t;this.cmds.push({c:y,a:[this,h,e||0,s||0,i,n,r,o,a,c]});return this};g2.prototype.img.broken="data:image/gif;base64,R0lGODlhHgAeAKIAAAAAmWZmmZnM/////8zMzGZmZgAAAAAAACwAAAAAHgAeAEADimi63P5ryAmEqHfqPRWfRQF+nEeeqImum0oJQxUThGaQ7hSs95ezvB4Q+BvihBSAclk6fgKiAkE0kE6RNqwkUBtMa1OpVlI0lsbmFjrdWbMH5Tdcu6wbf7J8YM9H4y0YAE0+dHVKIV0Efm5VGiEpY1A0UVMSBYtPGl1eNZhnEBGEck6jZ6WfoKmgCQA7";g2.prototype.lin=function m(t,e,s,i){this.cmds.push({c:m,a:[t,e,s,i]});return this};g2.prototype.rec=function v(t,e,s,i){this.cmds.push({c:v,a:[t,e,s,i]});return this};g2.prototype.cir=function x(t,e,s){this.cmds.push({c:x,a:[t,e,s]});return this};g2.prototype.arc=function w(t,e,s,i,n){this.cmds.push({c:w,a:[t,e,s,i,n]});return this};g2.prototype.ply=function S(t,e,s){var i=s&&(s.itr||s.fmt&&g2.prototype.ply.iterators[s.fmt])||false;this.cmds.push({c:S,a:[t,e,i]});return this};g2.prototype.ply.iterators={"x,y":function(t,e){return e<t.length/2?{x:t[2*e],y:t[2*e+1]}:{done:true,count:t.length/2}},"[x,y]":function(t,e){return e<t.length?{x:t[e][0],y:t[e][1]}:{done:true,count:t.length}},"{x,y}":function(t,e){return e<t.length?t[e]:{done:true,count:t.length}}};g2.prototype.ply.itr=g2.prototype.ply.iterators["x,y"];g2.prototype.beg=function A(t){this.cmds.push({c:A,a:t?[this,t]:[this],open:true});return this};g2.prototype.end=function k(){this.cmds.push({c:k,a:[this,this.findCmdIdx(k.matchBeg)]});return this};g2.prototype.end.matchBeg=function(t){if(t.c===g2.prototype.beg.cmd&&t.open===true){delete t.open;return true}return false};g2.prototype.clr=function b(){this.cmds.push({c:b});return this};g2.prototype.grid=function C(t,e){this.getState().gridBase=2;this.state.gridExp=1;this.cmds.push({c:C,a:[this,t,e]});return this};g2.prototype.grid.getSize=function(t,e){var s=t.gridBase||2,i=t.gridExp||1,n;while((n=e*s*Math.pow(10,i))<14||n>35){if(n<14){if(s==1)s=2;else if(s==2)s=5;else if(s==5){s=1;i++}}else{if(s==1){s=5;i--}else if(s==2)s=1;else if(s==5)s=2}}t.gridBase=s;t.gridExp=i;return n};g2.prototype.use=function z(t,e){if(typeof t==="string")t=g2.symbol[t];if(t&&t!==this){if(t.state&&t.state.loading){var s=this.getState();s.loading++;t.state.addListener("load",function(){s.loading--})}this.cmds.push({c:z,a:e?[this,t,e]:[this,t]})}return this};g2.prototype.style=function T(t){this.cmds.push({c:T,a:[this,t]});return this};g2.prototype.exe=function D(t,e){var s=g2.ifcof(t);if(s){var i=(e||this).cmds;if(this.state&&this.state.loading){requestAnimationFrame(D.bind(this,t,e))}else if(t&&i){var n=e&&e.state,r=g2.proxy[s](t);D[s].beg.call(r,this);if(e)e.state=this.state;for(var o=0,a=i.length,c;o<a;o++)if((c=i[o]).c[s])c.c[s].apply(r,c.a);if(e)e.state=n;D[s].end.call(r,this)}}return this};g2.prototype.cpy=function O(t){if(t!==this)t.cmds.forEach(function(t,e){if(e)this.cmds.push(t)},this);return this};g2.prototype.del=function P(){this.cmds.length=0;return this};g2.prototype.dump=function(t){function e(t){var s=[],i,n,r,o,a;for(var c=0,h=t.cmds.length;c<h;c++){a=[];n=t.cmds[c];r=n.a;for(var f=0,l=r&&r.length||0;f<l;f++){if(typeof r[f]==="object"&&r[f]instanceof g2){if(r[f]!==t)a.push(e(r[f]))}else if(r[f]!==undefined)a.push(r[f])}o=/\W*function\s+([\w\$]+)\(/.exec(n.c.toString())[1];if(a.length){i={};i[o]=a}else i=o;s.push(i)}return s}return JSON.stringify(e(this),undefined,t)};g2.prototype.getState=function(){return this.state||(this.state=g2.State.create(this))};g2.State={create:function(){var t=Object.create(this.prototype);t.constructor.apply(t,arguments);return t},prototype:{constructor:function(t){this.owner=t;this.stack=[{}];this.trf0={x:0,y:0,w:0,scl:1};this._loading=0;this.on={load:[]}},get loading(){return this._loading},set loading(t){if((this._loading=t)===0)this.invokeListeners("load")},hasListeners:function(t){return this.on[t]&&this.on[t].length},hasListener:function(t,e){if(this.on[t])for(var s=0;s<this.on[t].length;s++)if(this.on[t][s]===e)return true;return false},addListener:function(t,e){if(!this.hasListener(t,e))this.on[t].push(e)},removeListener:function(t,e){if(this.on[t])for(var s=0;s<this.on[t].length;s++)if(this.on[t][s]===e){this.on[t].splice(s,1);break}},invokeListeners:function(t){if(this.on[t])for(var e=0;e<this.on[t].length;e++)this.on[t][e]()},getAttr:function(t){return this.stack[this.stack.length-1][t]||g2.State[t]},setAttr:function(t,e){this.stack[this.stack.length-1][t]=e},save:function(){this.stack.push(JSON.parse(JSON.stringify(this.stack[this.stack.length-1])));return this},restore:function(){this.stack.pop();return this},transform:function(t){var e=this.stack[this.stack.length-1].trf||g2.State.trf,s=t.scl*(t.w?Math.sin(t.w):0),i=t.scl*(t.w?Math.cos(t.w):1);this.stack[this.stack.length-1].trf={x:i*e.x-s*e.y+t.x,y:s*e.x+i*e.y+t.y,w:e.w+t.w,scl:e.scl*t.scl};return this},get currentScale(){return(this.stack[this.stack.length-1].trf||g2.State.trf).scl}},fs:g2.transparent,ls:"#000",lw:1,lc:"butt",lj:"miter",lwnosc:false,ml:10,sh:[0,0,0,g2.transparent],foc:"#000",fos:"normal",fow:"normal",foz:12,fof:"serif",foznosc:false,trf:{x:0,y:0,w:0,scl:1}};g2.prototype.pntToUsr=function M(t,e,s){var i=this.state&&this.state.trf0||false;return!i?{x:t,y:e}:this.state.cartesian?{x:(t-i.x)/i.scl,y:-(e-(s-i.y))/i.scl}:{x:(t-i.x)/i.scl,y:(e-i.y)/i.scl}};g2.prototype.vecToUsr=function j(t,e){var s=this.state&&this.state.trf0||false;return!s?{x:t,y:e}:this.state.cartesian?{x:t/s.scl,y:-e/s.scl}:{x:t/s.scl,y:e/s.scl}};g2.symbol=Object.create(null);if(typeof module==="object"&&module.exports)module.exports=g2;/**
 * @fileoverview g2.c2d.js
 * @author Stefan Goessner (c) 2013-14
 * @license MIT License
 */
g2.ifc.c2d=function(t){return t instanceof CanvasRenderingContext2D};g2.proxy.c2d=function(t){return t};g2.prototype.exe.c2d={beg:function(t){if(g2.exeStack++===0){var e=t.state||(t.state=g2.State.create(t)),s=e.trf0;this.setTransform(s.scl,0,0,e.cartesian?-s.scl:s.scl,s.x+.5,(e.cartesian?this.canvas.height-s.y:s.y)+.5);this.lineWidth=1;this.strokeStyle="#000";this.setLineDash([]);this.font=g2.State.c2d.getAttr.call(this,"font",e);this.fillStyle=g2.transparent;e.stack=[{}]}},end:function(t){if(--g2.exeStack===0)this.fillStyle="#000000"}};g2.prototype.p.c2d=CanvasRenderingContext2D.prototype.beginPath;g2.prototype.m.c2d=CanvasRenderingContext2D.prototype.moveTo;g2.prototype.l.c2d=CanvasRenderingContext2D.prototype.lineTo;g2.prototype.q.c2d=CanvasRenderingContext2D.prototype.quadraticCurveTo;g2.prototype.c.c2d=CanvasRenderingContext2D.prototype.bezierCurveTo;g2.prototype.a.c2d=CanvasRenderingContext2D.prototype.arc;g2.prototype.z.c2d=CanvasRenderingContext2D.prototype.closePath;g2.prototype.stroke.c2d=function B(t){if(t&&typeof Path2D!=="undefined")this.stroke(new Path2D(t));else this.stroke()};g2.prototype.fill.c2d=function E(t){if(t&&typeof Path2D!=="undefined")this.fill(new Path2D(t));else this.fill()};g2.prototype.drw.c2d=function L(t){var e=t&&typeof Path2D!=="undefined"?new Path2D(t):false;e?this.fill(e):this.fill();if(this.fillStyle!==g2.transparent&&this.shadowColor!==g2.transparent){var s=this.shadowColor;this.shadowColor="transparent";e?this.stroke(e):this.stroke();this.shadowColor=s}else e?this.stroke(e):this.stroke()};g2.prototype.txt.c2d=function R(t,e,s,i,n,r){var o=t.state,a,c;if(r)g2.prototype.style.c2d.call(this,t,r);a=o.getAttr("foc");if(c=o.cartesian||n||a!==g2.transparent)this.save();if(n){var h=Math.sin(n),f=Math.cos(n);this.transform(f,h,-h,f,(1-f)*s+h*i,-h*s+(1-f)*i)}if(o.cartesian){this.scale(1,-1);i=-i}if(a!==g2.transparent){this.fillStyle=a;this.fillText(e,s,i)}else{this.fillText(e,s,i);this.strokeText(e,s,i)}if(c)this.restore()};g2.prototype.img.c2d=function W(t,e,s,i,n,r,o,a,c,h){n=n||e&&e.width;r=r||e&&e.height;if(t.state.cartesian){this.save();this.scale(1,-1);i=-i-r}if(o||a||c||h)this.drawImage(e,o,a,c,h,s,i,n,r);else this.drawImage(e,s,i,n,r);if(t.state.cartesian){this.restore()}};g2.prototype.lin.c2d=function I(t,e,s,i){this.beginPath();this.moveTo(t,e);this.lineTo(s,i);this.stroke()};g2.prototype.rec.c2d=function q(t,e,s,i){this.beginPath();this.rect(t,e,s,i);g2.prototype.drw.c2d.call(this)};g2.prototype.cir.c2d=function J(t,e,s){this.beginPath();this.arc(t,e,s,0,Math.PI*2,true);g2.prototype.drw.c2d.call(this)};g2.prototype.arc.c2d=function Y(t,e,s,i,n){this.beginPath();this.arc(t,e,s,i,i+n,n<0);g2.prototype.drw.c2d.call(this)};g2.prototype.ply.c2d=function G(t,e,s){var i,n=0,r=e==="split";s=s||g2.prototype.ply.itr;i=s(t,n++);if(!i.done){this.beginPath();this.moveTo(i.x,i.y);while(!(i=s(t,n++)).done){if(r&&n%2)this.moveTo(i.x,i.y);else this.lineTo(i.x,i.y)}if(e&&!r)this.closePath()}g2.prototype.drw.c2d.call(this);return n-1};g2.prototype.beg.c2d=function H(t,e){var s=t.state;s.save();this.save();if(e){if("x"in e||"y"in e||"w"in e||"scl"in e){s.transform(e);g2.State.c2d.set.trf.call(this,e,s)}else if("matrix"in e)this.transform.apply(this,e.matrix);g2.prototype.style.c2d.call(this,t,e)}};g2.prototype.end.c2d=function Z(t,e){this.restore();t.state.restore()};g2.prototype.clr.c2d=function N(){this.save();this.setTransform(1,0,0,1,0,0);this.clearRect(0,0,this.canvas.width,this.canvas.height);this.restore()};g2.prototype.grid.c2d=function Q(t,e,s){var i=t.state,n=i.getAttr("trf"),r=i.cartesian,o=this.canvas.width,a=this.canvas.height,c=s||g2.prototype.grid.getSize(i,n?n.scl:1),h=n.x?n.x%c-c:0,f=n.y?n.y%c-c:0;this.save();if(r)this.setTransform(1,0,0,-1,.5,a-.5);else this.setTransform(1,0,0,1,.5,.5);this.strokeStyle=e||"#ccc";this.lineWidth=1;this.beginPath();for(var l=h,p=o+1;l<p;l+=c){this.moveTo(l,0);this.lineTo(l,a)}for(var u=f,g=a+1;u<g;u+=c){this.moveTo(0,u);this.lineTo(o,u)}this.stroke();this.restore()};g2.prototype.use.c2d=function U(t,e,s){var i=t.state;i.save();this.save();if(s){if("x"in s||"y"in s||"w"in s||"scl"in s){i.transform(s);g2.State.c2d.set.trf.call(this,s,i)}else if("matrix"in s)this.transform.apply(this,s.matrix);g2.prototype.style.c2d.call(this,t,s)}t.exe(this,e);this.restore();i.restore()};g2.prototype.style.c2d=function V(t,e){var s=t.state,i;for(var n in e){i=e[n];if(typeof i==="string"&&i[0]==="@")i=g2.State.c2d.getAttr.call(this,i.substr(1),s);g2.State.c2d.setAttr.call(this,n,i,s)}};g2.State.c2d={getAttr:function(t,e){return g2.State.c2d.get[t]?g2.State.c2d.get[t].call(this,e):e.getAttr(t)},setAttr:function(t,e,s){var i={x:0,y:0,w:0,scl:0};if(!(t in i))g2.State.c2d.set[t]?g2.State.c2d.set[t].call(this,e,s):s.setAttr(t)},get:{fs:function(){return this.fillStyle},ls:function(){return this.strokeStyle},lw:function(t){return this.lineWidth*(t.getAttr("lwnosc")?t.currentScale:1)},lc:function(){return this.lineCap},lj:function(){return this.lineJoin},lo:function(){return this.lineDashOffset},ld:function(){var t=this.lineWidth,e=this.getLineDash();for(var s=0,i=e.length;s<i;s++)e[s]/=t;return e},ml:function(){return this.miterLimit},shx:function(){return this.shadowOffsetX},shy:function(){return this.shadowOffsetY},shb:function(){return this.shadowBlur},shc:function(){return this.shadowColor},thal:function(){return this.textAlign},tval:function(){return this.textBaseline},font:function(t){var e=t.getAttr("fos"),s=t.getAttr("fow"),i=t.getAttr("foz"),n=t.getAttr("fof"),r=(e==="normal"?"":e+" ")+(s==="normal"?"":s+" ")+(i+"px "+n);return r}},set:{fs:function(t){this.fillStyle=t==="transparent"?g2.transparent:t},ls:function(t){this.strokeStyle=t==="transparent"?g2.transparent:t},lw:function(t,e){this.lineWidth=t/(e.getAttr("lwnosc")?e.currentScale:1)},lc:function(t){this.lineCap=t},lj:function(t){this.lineJoin=t},lo:function(t){this.lineDashOffset=t},ld:function(t,e){var s=e.getAttr("lwnosc")?e.currentScale:1;if(s!==1){var i=this.lineWidth*s,n=[];for(var r=0,o=t.length;r<o;r++)n.push(t[r]/i);this.setLineDash(n)}else this.setLineDash(t)},ml:function(t){this.miterLimit=t},sh:function(t,e){if(t){e.setAttr("sh",t);if(t[0])this.shadowOffsetX=t[0]||5;if(t[1])this.shadowOffsetY=t[1]||5;if(t[2])this.shadowBlur=t[2]||5;if(t[3])this.shadowColor=t[3]||"rgba(0,0,0,0.5)"}},shx:function(t){this.shadowOffsetX=t},shy:function(t){this.shadowOffsetY=t},shb:function(t){this.shadowBlur=t},shc:function(t){this.shadowColor=t==="transparent"?g2.transparent:t},thal:function(t){this.textAlign=t},tval:function(t){this.textBaseline=t},foc:function(t,e){e.setAttr("foc",t==="transparent"?g2.transparent:t)},fos:function(t,e){e.setAttr("fos",t);this.font=g2.State.c2d.get["font"](e)},fow:function(t,e){e.setAttr("fow",t);this.font=g2.State.c2d.get["font"](e)},foz:function(t,e){e.setAttr("foz",t/(e.getAttr("foznosc")?e.currentScale:1));this.font=g2.State.c2d.get["font"](e)},fof:function(t,e){e.setAttr("fof",t);this.font=g2.State.c2d.get["font"](e)},lwnosc:function(t,e){if(t!==e.getAttr("lwnosc")){if(t)this.lineWidth/=e.currentScale;else this.lineWidth*=e.currentScale;e.setAttr("lwnosc",t)}},foznosc:function(t,e){if(t!==e.getAttr("foznosc")){var s=e.getAttr("foz");if(t)s/=e.currentScale;else s*=e.currentScale;e.setAttr("foz",s);this.font=e.font;e.setAttr("lwnosc",t)}},trf:function(t,e){var s=t.scl||1,i=s!==1,n,r,o,a=s*(t.w?Math.sin(t.w):0),c=s*(t.w?Math.cos(t.w):1);if(i){n=g2.State.c2d.get["lw"].call(this,e);r=g2.State.c2d.get["ld"].call(this,e);o=e.getAttr("foz")}this.transform(c,a,-a,c,t.x||0,t.y||0);if(i){g2.State.c2d.set["lw"].call(this,n,e);g2.State.c2d.set["ld"].call(this,r,e);g2.State.c2d.set["foz"].call(this,o,e)}}}};