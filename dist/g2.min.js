/**
 * g2 (c) 2013-16 Stefan Goessner
 * @license
 * MIT License
 */
if(!Math.hypot)Math.hypot=function(t,e){return Math.sqrt(t*t+e*e)};function g2(){if(this instanceof g2)return this.constructor.apply(this,arguments);else return g2.apply(Object.create(g2.prototype),arguments)}g2.version="2.0.0";g2.transparent="rgba(0, 0, 0, 0)";g2.exeStack=0;g2.proxy=Object.create(null);g2.ifc=Object.create(null);g2.ifcof=function(t){for(var e in g2.ifc)if(g2.ifc[e](t))return e;return false};g2.prototype.constructor=function t(e){if(e){this.state=g2.State.create(this);if(e.zoom)this.zoom(e.zoom.scl,e.zoom.x,e.zoom.y);if(e.pan)this.pan(e.pan.dx,e.pan.dy);if(e.trf)this.trf(e.trf.x,e.trf.y,e.trf.scl);if(e.cartesian)this.state.cartesian=e.cartesian}this.cmds=[];return this};g2.prototype.cartesian=function e(t){this.getState().cartesian=t!==false;return this};g2.prototype.pan=function s(t,e){this.getState().trf0.x+=t;this.state.trf0.y+=e;return this};g2.prototype.zoom=function i(t,e,s){this.getState().trf0.x=(1-t)*(e||0)+t*this.state.trf0.x;this.state.trf0.y=(1-t)*(s||0)+t*this.state.trf0.y;this.state.trf0.scl*=t;return this};g2.prototype.view=function n(t,e,s){this.getState().trf0.x=t;this.state.trf0.y=e;this.state.trf0.scl=s;return this};g2.prototype.del=function r(){this.cmds.length=0;return this};g2.prototype._curPnt=function(){var t=this.cmds.length&&this.cmds[this.cmds.length-1]||false;return t&&(t.cp||t.a)};g2.prototype.findCmdIdx=function(t){for(var e=this.cmds.length-1;e>=0;e--)if(t(this.cmds[e],e,this.cmds))return e;return 0};g2.prototype.p=function o(){this.cmds.push({c:o});return this};g2.prototype.m=function c(t,e){this.cmds.push({c:c,a:[t,e]});return this};g2.prototype.l=function h(t,e){this.cmds.push({c:h,a:[t,e]});return this};g2.prototype.q=function a(t,e,s,i){this.cmds.push({c:a,a:[t,e,s,i],cp:[s,i]});return this};g2.prototype.c=function f(t,e,s,i,n,r){this.cmds.push({c:f,a:[t,e,s,i,n,r],cp:[n,r]});return this};g2.prototype.a=function l(t,e,s){var i=this._curPnt(),n=2*Math.PI;if(i&&t>Number.EPSILON||t<-Number.EPSILON||t>=n||t<=-n){var r=e-i[0],o=s-i[1],c=Math.tan(t/2),h=r/2-o/c/2,a=o/2+r/c/2,f=Math.atan2(-a,-h);this.cmds.push({c:l,a:[i[0]+h,i[1]+a,Math.hypot(h,a),f,f+t,t<0],cp:[e,s]})}else this.cmds.push({c:g2.prototype.l,a:[e,s]});return this};g2.prototype.z=function p(){this.cmds.push({c:p});return this};g2.prototype.stroke=function u(t){this.cmds.push(t?{c:u,a:[t]}:{c:u});return this};g2.prototype.fill=function g(t){this.cmds.push(t?{c:g,a:[t]}:{c:g});return this};g2.prototype.drw=function d(t){this.cmds.push(t?{c:d,a:[t]}:{c:d});return this};g2.prototype.txt=function y(t,e,s,i,n){this.cmds.push({c:y,a:n?[this,t,e||0,s||0,i||0,n]:[this,t,e||0,s||0,i||0]});return this};g2.prototype.img=function m(t,e,s,i,n,r,o,c,h){var a=new Image,f=this.getState();f.loading++;a.onload=function l(){f.loading--};a.onerror=function(){a.src=g2.prototype.img.broken};a.src=t;this.cmds.push({c:m,a:[this,a,e||0,s||0,i,n,r,o,c,h]});return this};g2.prototype.img.broken="data:image/gif;base64,R0lGODlhHgAeAKIAAAAAmWZmmZnM/////8zMzGZmZgAAAAAAACwAAAAAHgAeAEADimi63P5ryAmEqHfqPRWfRQF+nEeeqImum0oJQxUThGaQ7hSs95ezvB4Q+BvihBSAclk6fgKiAkE0kE6RNqwkUBtMa1OpVlI0lsbmFjrdWbMH5Tdcu6wbf7J8YM9H4y0YAE0+dHVKIV0Efm5VGiEpY1A0UVMSBYtPGl1eNZhnEBGEck6jZ6WfoKmgCQA7";g2.prototype.lin=function v(t,e,s,i){this.cmds.push({c:v,a:[t,e,s,i]});return this};g2.prototype.rec=function x(t,e,s,i){this.cmds.push({c:x,a:[t,e,s,i]});return this};g2.prototype.cir=function w(t,e,s){this.cmds.push({c:w,a:[t,e,s]});return this};g2.prototype.arc=function A(t,e,s,i,n){this.cmds.push({c:A,a:[t,e,s,i||0,n||2*Math.PI]});return this};g2.prototype.ply=function S(t,e,s){if(t&&t.length&&typeof s!=="function")s=typeof t[0]==="number"?g2.prototype.ply.iterators["x,y"]:Array.isArray(t[0])&&t[0].length>=2?g2.prototype.ply.iterators["[x,y]"]:typeof t[0]==="object"&&"x"in t[0]&&"y"in t[0]?g2.prototype.ply.iterators["{x,y}"]:undefined;this.cmds.push({c:S,a:[t,e,s]});return this};g2.prototype.ply.iterators={"x,y":function(t,e){return e<t.length/2?{x:t[2*e],y:t[2*e+1]}:{done:true,count:t.length/2}},"[x,y]":function(t,e){return e<t.length?{x:t[e][0],y:t[e][1]}:{done:true,count:t.length}},"{x,y}":function(t,e){return e<t.length?t[e]:{done:true,count:t.length}}};g2.prototype.ply.itr=g2.prototype.ply.iterators["x,y"];g2.prototype.beg=function b(t){this.cmds.push({c:b,a:t?[this,t]:[this],open:true});return this};g2.prototype.end=function k(){this.cmds.push({c:k,a:[this,this.findCmdIdx(k.matchBeg)]});return this};g2.prototype.end.matchBeg=function(t){if(t.c===g2.prototype.beg.cmd&&t.open===true){delete t.open;return true}return false};g2.prototype.clr=function C(){this.cmds.push({c:C});return this};g2.prototype.grid=function z(t,e){this.getState().gridBase=2;this.state.gridExp=1;this.cmds.push({c:z,a:[this,t,e]});return this};g2.prototype.grid.getSize=function(t,e){var s=t.gridBase||2,i=t.gridExp||1,n;while((n=e*s*Math.pow(10,i))<14||n>35){if(n<14){if(s==1)s=2;else if(s==2)s=5;else if(s==5){s=1;i++}}else{if(s==1){s=5;i--}else if(s==2)s=1;else if(s==5)s=2}}t.gridBase=s;t.gridExp=i;return n};g2.prototype.use=function P(t,e){if(typeof t==="string")t=g2.symbol[t];if(t&&t!==this){var s=this.getState();if(t.state&&t.state.loading){s.loading++;t.state.addListener("load",function(){s.loading--})}this.cmds.push({c:P,a:e?[this,t,e]:[this,t]})}return this};g2.prototype.style=function T(t){this.cmds.push({c:T,a:[this,t]});return this};g2.prototype.exe=function j(t,e){var s=g2.ifcof(t);if(s){var i=(e||this).cmds;if(this.state&&this.state.loading){requestAnimationFrame(j.bind(this,t,e))}else if(t&&i){var n=e&&e.state,r=g2.proxy[s](t);j[s].beg.call(r,this);if(e)e.state=this.state;for(var o=0,c=i.length,h;o<c;o++)if((h=i[o]).c[s])h.c[s].apply(r,h.a);if(e)e.state=n;j[s].end.call(r,this)}}return this};g2.prototype.cpy=function O(t){if(t!==this)t.cmds.forEach(function(t,e){if(e)this.cmds.push(t)},this);return this};g2.State={create:function(){var t=Object.create(this.prototype);t.constructor.apply(t,arguments);return t},prototype:{constructor:function(t){this.owner=t;this.stack=[{}];this.trf0={x:0,y:0,w:0,scl:1};this._loading=0;this.on={load:[]}},get loading(){return this._loading},set loading(t){if((this._loading=t)===0)this.invokeListeners("load")},hasListeners:function(t){return this.on[t]&&this.on[t].length},hasListener:function(t,e){if(this.on[t])for(var s=0;s<this.on[t].length;s++)if(this.on[t][s]===e)return true;return false},addListener:function(t,e){if(!this.hasListener(t,e))this.on[t].push(e)},removeListener:function(t,e){if(this.on[t])for(var s=0;s<this.on[t].length;s++)if(this.on[t][s]===e){this.on[t].splice(s,1);break}},invokeListeners:function(t){if(this.on[t])for(var e=0;e<this.on[t].length;e++)this.on[t][e]()},getAttr:function(t){return this.stack[this.stack.length-1][t]||g2.State[t]},setAttr:function(t,e){this.stack[this.stack.length-1][t]=e},get trf(){return this.stack[this.stack.length-1].trf||this.trf0},set trf(t){var e=t.w||0,s=t.scl||1,i=s*(e?Math.sin(e):0),n=s*(e?Math.cos(e):1),r=this.stack[this.stack.length-1].trf||this.trf0;this.stack[this.stack.length-1].trf={x:n*r.x-i*r.y+(t.x||0),y:i*r.x+n*r.y+(t.y||0),w:r.w+e,scl:r.scl*s}},save:function(){this.stack.push(JSON.parse(JSON.stringify(this.stack[this.stack.length-1])));return this},restore:function(){this.stack.pop();return this},get currentScale(){return(this.stack[this.stack.length-1].trf||this.trf0).scl}},fs:g2.transparent,ls:"#000",lw:1,lc:"butt",lj:"miter",lwnosc:false,ml:10,sh:[0,0,0,g2.transparent],foc:"#000",fos:"normal",fow:"normal",foz:12,fof:"serif",foznosc:false,trf:{x:0,y:0,w:0,scl:1}};g2.prototype.getState=function(){return this.state||(this.state=g2.State.create(this))};g2.prototype.pntToUsr=function D(t,e,s){var i=this.state&&this.state.trf0||false;return!i?{x:t,y:e}:this.state.cartesian?{x:(t-i.x)/i.scl,y:-(e-(s-i.y))/i.scl}:{x:(t-i.x)/i.scl,y:(e-i.y)/i.scl}};g2.prototype.vecToUsr=function M(t,e){var s=this.state&&this.state.trf0||false;return!s?{x:t,y:e}:this.state.cartesian?{x:t/s.scl,y:-e/s.scl}:{x:t/s.scl,y:e/s.scl}};g2.prototype.dump=function(t){function e(t){var s=[],i,n,r,o,c;for(var h=0,a=t.cmds.length;h<a;h++){c=[];n=t.cmds[h];r=n.a;for(var f=0,l=r&&r.length||0;f<l;f++){if(typeof r[f]==="object"&&r[f]instanceof g2){if(r[f]!==t)c.push(e(r[f]))}else if(r[f]!==undefined)c.push(r[f])}o=/\W*function\s+([\w\$]+)\(/.exec(n.c.toString())[1];if(c.length){i={};i[o]=c}else i=o;s.push(i)}return s}return JSON.stringify(e(this),undefined,t)};g2.symbol=Object.create(null);if(typeof module==="object"&&module.exports)module.exports=g2;/**
 * @fileoverview g2.c2d.js
 * @author Stefan Goessner (c) 2013-16
 * @license MIT License
 */
g2.ifc.c2d=function(t){return t instanceof CanvasRenderingContext2D};g2.proxy.c2d=function(t){return t};g2.prototype.exe.c2d={beg:function(t){if(g2.exeStack++===0){var e=t.getState(),s=e.trf;this.setTransform(s.scl,0,0,e.cartesian?-s.scl:s.scl,s.x+.5,(e.cartesian?this.canvas.height-s.y:s.y)+.5);this.lineWidth=1;this.strokeStyle="#000";this.setLineDash([]);this.font=g2.State.c2d.getAttr.call(this,"font",e);this.fillStyle=g2.transparent;e.stack=[{}]}},end:function(t){if(--g2.exeStack===0)this.fillStyle="#000000"}};g2.prototype.p.c2d=CanvasRenderingContext2D.prototype.beginPath;g2.prototype.m.c2d=CanvasRenderingContext2D.prototype.moveTo;g2.prototype.l.c2d=CanvasRenderingContext2D.prototype.lineTo;g2.prototype.q.c2d=CanvasRenderingContext2D.prototype.quadraticCurveTo;g2.prototype.c.c2d=CanvasRenderingContext2D.prototype.bezierCurveTo;g2.prototype.a.c2d=CanvasRenderingContext2D.prototype.arc;g2.prototype.z.c2d=CanvasRenderingContext2D.prototype.closePath;g2.prototype.stroke.c2d=function E(t){if(t&&typeof Path2D!=="undefined")this.stroke(new Path2D(t));else this.stroke()};g2.prototype.fill.c2d=function L(t){if(t&&typeof Path2D!=="undefined")this.fill(new Path2D(t));else this.fill()};g2.prototype.drw.c2d=function B(t){var e=t&&typeof Path2D!=="undefined"?new Path2D(t):false;e?this.fill(e):this.fill();if(this.fillStyle!==g2.transparent&&this.shadowColor!==g2.transparent){var s=this.shadowColor;this.shadowColor="transparent";e?this.stroke(e):this.stroke();this.shadowColor=s}else e?this.stroke(e):this.stroke()};g2.prototype.txt.c2d=function I(t,e,s,i,n,r){var o=t.state,c;o.save();this.save();g2.prototype.style.c2d.call(this,t,r);c=o.getAttr("foc");if(n){var h=Math.sin(n),a=Math.cos(n);this.transform(a,h,-h,a,(1-a)*s+h*i,-h*s+(1-a)*i)}if(o.cartesian){this.scale(1,-1);i=-i}if(c!==g2.transparent){this.fillStyle=c;this.fillText(e,s,i)}else{this.fillText(e,s,i);this.strokeText(e,s,i)}this.restore();o.restore()};g2.prototype.img.c2d=function R(t,e,s,i,n,r,o,c,h,a){n=n||e&&e.width;r=r||e&&e.height;if(t.state.cartesian){this.save();this.scale(1,-1);i=-i-r}if(o||c||h||a)this.drawImage(e,o,c,h,a,s,i,n,r);else this.drawImage(e,s,i,n,r);if(t.state.cartesian){this.restore()}};g2.prototype.lin.c2d=function W(t,e,s,i){this.beginPath();this.moveTo(t,e);this.lineTo(s,i);this.stroke()};g2.prototype.rec.c2d=function q(t,e,s,i){this.beginPath();this.rect(t,e,s,i);g2.prototype.drw.c2d.call(this)};g2.prototype.cir.c2d=function N(t,e,s){this.beginPath();this.arc(t,e,s,0,Math.PI*2,true);g2.prototype.drw.c2d.call(this)};g2.prototype.arc.c2d=function J(t,e,s,i,n){this.beginPath();this.arc(t,e,s,i,i+n,n<0);g2.prototype.drw.c2d.call(this)};g2.prototype.ply.c2d=function G(t,e,s){var i,n=0,r=e==="split";i=s(t,n++);if(!i.done){this.beginPath();this.moveTo(i.x,i.y);while(!(i=s(t,n++)).done){if(r&&n%2)this.moveTo(i.x,i.y);else this.lineTo(i.x,i.y)}if(e&&!r)this.closePath()}g2.prototype.drw.c2d.call(this);return n-1};g2.prototype.beg.c2d=function H(t,e){var s=t.state;s.save();this.save();if(e){if("x"in e||"y"in e||"w"in e||"scl"in e){s.trf=e;g2.State.c2d.set.trf.call(this,e,s)}else if("matrix"in e)this.transform.apply(this,e.matrix);g2.prototype.style.c2d.call(this,t,e)}};g2.prototype.end.c2d=function Y(t,e){this.restore();t.state.restore()};g2.prototype.clr.c2d=function Z(){this.save();this.setTransform(1,0,0,1,0,0);this.clearRect(0,0,this.canvas.width,this.canvas.height);this.restore()};g2.prototype.grid.c2d=function Q(t,e,s){var i=t.state,n=i.trf0,r=i.cartesian,o=this.canvas.width,c=this.canvas.height,h=s||g2.prototype.grid.getSize(i,n?n.scl:1),a=n.x?n.x%h-h:0,f=n.y?n.y%h-h:0;this.save();if(r)this.setTransform(1,0,0,-1,.5,c-.5);else this.setTransform(1,0,0,1,.5,.5);this.strokeStyle=e||"#ccc";this.lineWidth=1;this.beginPath();for(var l=a,p=o+1;l<p;l+=h){this.moveTo(l,0);this.lineTo(l,c)}for(var u=f,g=c+1;u<g;u+=h){this.moveTo(0,u);this.lineTo(o,u)}this.stroke();this.restore()};g2.prototype.use.c2d=function U(t,e,s){var i=t.state;i.save();this.save();if(s){if("x"in s||"y"in s||"w"in s||"scl"in s){i.trf=s;g2.State.c2d.set.trf.call(this,s,i)}else if("matrix"in s)this.transform.apply(this,s.matrix);g2.prototype.style.c2d.call(this,t,s)}t.exe(this,e);this.restore();i.restore()};g2.prototype.style.c2d=function V(t,e){var s=t.state,i;for(var n in e){i=e[n];if(typeof i==="string"&&i[0]==="@")i=g2.State.c2d.getAttr.call(this,i.substr(1),s);g2.State.c2d.setAttr.call(this,n,i,s)}};g2.State.c2d={getAttr:function(t,e){return g2.State.c2d.get[t]?g2.State.c2d.get[t].call(this,e):e.getAttr(t)},setAttr:function(t,e,s){var i={x:0,y:0,w:0,scl:0};if(!(t in i))g2.State.c2d.set[t]?g2.State.c2d.set[t].call(this,e,s):s.setAttr(t,e)},get:{fs:function(){return this.fillStyle},ls:function(){return this.strokeStyle},lw:function(t){return this.lineWidth*(t.getAttr("lwnosc")?t.currentScale:1)},lc:function(){return this.lineCap},lj:function(){return this.lineJoin},lo:function(){return this.lineDashOffset},ld:function(){var t=this.lineWidth,e=this.getLineDash();for(var s=0,i=e.length;s<i;s++)e[s]/=t;return e},ml:function(){return this.miterLimit},sh:function(){return[this.shadowOffsetX,this.shadowOffsetY,this.shadowBlurthis.shadowColor]},thal:function(){return this.textAlign},tval:function(){return this.textBaseline},font:function(t){var e=t.getAttr("fos"),s=t.getAttr("fow"),i=t.getAttr("foz"),n=t.getAttr("fof"),r=(e==="normal"?"":e+" ")+(s==="normal"?"":s+" ")+(i+"px "+n);return r}},set:{fs:function(t){this.fillStyle=t==="transparent"?g2.transparent:t},ls:function(t){this.strokeStyle=t==="transparent"?g2.transparent:t},lw:function(t,e){this.lineWidth=t/(e.getAttr("lwnosc")?e.currentScale:1)},lc:function(t){this.lineCap=t},lj:function(t){this.lineJoin=t},lo:function(t){this.lineDashOffset=t},ld:function(t,e){var s=e.getAttr("lwnosc")?e.currentScale:1;if(s!==1){var i=this.lineWidth*s,n=[];for(var r=0,o=t.length;r<o;r++)n.push(t[r]/i);this.setLineDash(n)}else this.setLineDash(t)},ml:function(t){this.miterLimit=t},sh:function(t,e){if(t){e.setAttr("sh",t);if(t[0])this.shadowOffsetX=t[0]||5;if(t[1])this.shadowOffsetY=t[1]||5;if(t[2])this.shadowBlur=t[2]||5;if(t[3])this.shadowColor=t[3]||"rgba(0,0,0,0.5)"}},thal:function(t){this.textAlign=t},tval:function(t){this.textBaseline=t},foc:function(t,e){e.setAttr("foc",t==="transparent"?g2.transparent:t)},fos:function(t,e){e.setAttr("fos",t);this.font=g2.State.c2d.get["font"](e)},fow:function(t,e){e.setAttr("fow",t);this.font=g2.State.c2d.get["font"](e)},foz:function(t,e){e.setAttr("foz",t/(e.getAttr("foznosc")?e.currentScale:1));this.font=g2.State.c2d.get["font"](e)},fof:function(t,e){e.setAttr("fof",t);this.font=g2.State.c2d.get["font"](e)},lwnosc:function(t,e){if(t!==e.getAttr("lwnosc")){if(t)this.lineWidth/=e.currentScale;else this.lineWidth*=e.currentScale;e.setAttr("lwnosc",t)}},foznosc:function(t,e){if(t!==e.getAttr("foznosc")){var s=e.getAttr("foz");if(t)s/=e.currentScale;else s*=e.currentScale;e.setAttr("foz",s);this.font=e.font;e.setAttr("lwnosc",t)}},trf:function(t,e){var s=t.scl||1,i=s!==1,n,r,o,c=s*(t.w?Math.sin(t.w):0),h=s*(t.w?Math.cos(t.w):1);if(i){n=g2.State.c2d.get["lw"].call(this,e);r=g2.State.c2d.get["ld"].call(this,e);o=e.getAttr("foz")}this.transform(h,c,-c,h,t.x||0,t.y||0);if(i){g2.State.c2d.set["lw"].call(this,n,e);g2.State.c2d.set["ld"].call(this,r,e);g2.State.c2d.set["foz"].call(this,o,e)}}}};