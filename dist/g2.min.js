/**
 * g2 (c) 2013-16 Stefan Goessner
 * @license
 * MIT License
 */
if(!Math.hypot)Math.hypot=function(t,e){return Math.sqrt(t*t+e*e)};function g2(){if(this instanceof g2)return this.constructor.apply(this,arguments);else return g2.apply(Object.create(g2.prototype),arguments)}g2.prototype.constructor=function t(e){if(e)Object.assign(this,e);this.cmds=[];return this};Object.defineProperty(g2.prototype,"state",{get:function(){return this._state||(this._state=g2.State.create(this))}});g2.prototype.cartesian=function e(t){this.state.cartesian=t!==false;return this};g2.prototype.pan=function s(t,e){this.state.trf0.x+=t;this.state.trf0.y+=e;return this};g2.prototype.zoom=function i(t,e,s){this.state.trf0.x=(1-t)*(e||0)+t*this.state.trf0.x;this.state.trf0.y=(1-t)*(s||0)+t*this.state.trf0.y;this.state.trf0.scl*=t;return this};g2.prototype.view=function n(t,e,s){this.state.trf0.x=t;this.state.trf0.y=e;this.state.trf0.scl=s;return this};g2.prototype.del=function r(){this.cmds.length=0;return this};g2.prototype._curPnt=function(){var t=this.cmds.length&&this.cmds[this.cmds.length-1]||false;return t&&(t.cp||t.a)};g2.prototype.findCmdIdx=function(t){for(var e=this.cmds.length-1;e>=0;e--)if(t(this.cmds[e],e,this.cmds))return e;return false};g2.prototype.p=function o(){this.cmds.push({c:o});return this};g2.prototype.m=function h(t,e){this.cmds.push({c:h,a:[t,e]});return this};g2.prototype.l=function a(t,e){this.cmds.push({c:a,a:[t,e]});return this};g2.prototype.q=function c(t,e,s,i){this.cmds.push({c:c,a:[t,e,s,i],cp:[s,i]});return this};g2.prototype.c=function f(t,e,s,i,n,r){this.cmds.push({c:f,a:[t,e,s,i,n,r],cp:[n,r]});return this};g2.prototype.a=function p(t,e,s){var i=this._curPnt(),n=2*Math.PI;if(i&&(t>Number.EPSILON&&t<n||t<-Number.EPSILON&&t>-n)){var r=e-i[0],o=s-i[1],h=Math.tan(t/2),a=r/2-o/h/2,c=o/2+r/h/2,f=Math.atan2(-c,-a);this.cmds.push({c:p,a:[i[0]+a,i[1]+c,Math.hypot(a,c),f,f+t,t<0],cp:[e,s]})}else this.cmds.push({c:g2.prototype.l,a:[e,s]});return this};g2.prototype.z=function u(){this.cmds.push({c:u});return this};g2.prototype.stroke=function l(t,e){var s=t===undefined&&e===undefined?[]:typeof t==="string"?[null,t]:typeof t==="object"&&!e?[t]:[t,e];this.cmds.push({c:l,a:s});return this};g2.prototype.fill=function g(t,e){var s=t===undefined&&e===undefined?[]:typeof t==="string"?[null,t]:typeof t==="object"&&!e?[t]:[t,e];this.cmds.push({c:g,a:s});return this};g2.prototype.drw=function d(t,e){var s=t===undefined&&e===undefined?[]:typeof t==="string"?[null,t]:typeof t==="object"&&!e?[t]:[t,e];this.cmds.push({c:d,a:s});return this};g2.prototype.txt=function y(t,e,s,i,n){this.cmds.push({c:y,a:[t,e||0,s||0,i||0,n]});return this};g2.prototype.img=function m(t,e,s,i,n,r,o,h,a){var c=new Image,f=this.state;f.loading++;c.onload=function p(){f.loaded()};c.onerror=function(){c.src=g2.prototype.img.broken};c.src=t;this.cmds.push({c:m,a:[c,e||0,s||0,i,n,r,o,h,a]});return this};g2.prototype.img.broken="data:image/gif;base64,R0lGODlhHgAeAKIAAAAAmWZmmZnM/////8zMzGZmZgAAAAAAACwAAAAAHgAeAEADimi63P5ryAmEqHfqPRWfRQF+nEeeqImum0oJQxUThGaQ7hSs95ezvB4Q+BvihBSAclk6fgKiAkE0kE6RNqwkUBtMa1OpVlI0lsbmFjrdWbMH5Tdcu6wbf7J8YM9H4y0YAE0+dHVKIV0Efm5VGiEpY1A0UVMSBYtPGl1eNZhnEBGEck6jZ6WfoKmgCQA7";g2.prototype.lin=function v(t,e,s,i,n){this.cmds.push({c:v,a:[t,e,s,i,n]});return this};g2.prototype.rec=function x(t,e,s,i,n){this.cmds.push({c:x,a:[t,e,s,i,n]});return this};g2.prototype.cir=function w(t,e,s,i){this.cmds.push({c:w,a:[t,e,s,i]});return this};g2.prototype.arc=function b(t,e,s,i,n,r){this.cmds.push({c:b,a:[t,e,s,i||0,n||2*Math.PI,r]});return this};g2.prototype.ply=function _(t,e,s){var i=_.itrOf(t,s);if(i)this.cmds.push({c:_,a:[t,e,i,s]});return this};g2.prototype.ply.iterators={"x,y":function(t,e){return e<t.length/2?{x:t[2*e],y:t[2*e+1]}:{done:true,count:t.length/2}},"[x,y]":function(t,e){return e<t.length?{x:t[e][0],y:t[e][1]}:{done:true,count:t.length}},"{x,y}":function(t,e){return e<t.length?t[e]:{done:true,count:t.length}}};g2.prototype.ply.itrOf=function k(t,e){return!(t&&t.length)?undefined:e&&typeof e.itr==="function"?e.itr:typeof t[0]==="number"?g2.prototype.ply.iterators["x,y"]:Array.isArray(t[0])&&t[0].length>=2?g2.prototype.ply.iterators["[x,y]"]:typeof t[0]==="object"&&"x"in t[0]&&"y"in t[0]?g2.prototype.ply.iterators["{x,y}"]:undefined};g2.prototype.beg=function A(t){this.cmds.push(t?{c:A,a:[t],open:true}:{c:A,open:true});return this};g2.prototype.end=function O(){this.cmds.push({c:O});return this};g2.prototype.end.myBeg=function(t){if(t.c===g2.prototype.beg.cmd&&t.open===true){delete t.open;return true}return false};g2.prototype.clr=function j(){this.cmds.push({c:j});return this};g2.prototype.grid=function S(t,e){this.state.gridBase=2;this.state.gridExp=1;this.cmds.push({c:S,a:[t,e]});return this};g2.prototype.grid.getSize=function(t,e){var s=t.gridBase||2,i=t.gridExp||1,n;while((n=e*s*Math.pow(10,i))<14||n>35){if(n<14){if(s==1)s=2;else if(s==2)s=5;else if(s==5){s=1;i++}}else{if(s==1){s=5;i--}else if(s==2)s=1;else if(s==5)s=2}}t.gridBase=s;t.gridExp=i;return n};g2.prototype.use=function C(t,e){if(typeof t==="string")t=g2.symbol[t];if(t&&t!==this){var s=this.state;if(t.state&&t.state.loading){s.loading++;t.state.onload(g2.State.prototype.loaded.bind(s))}this.cmds.push({c:C,a:[t,e]})}return this};g2.prototype.style=function P(t){this.cmds.push({c:P,a:[t]});return this};g2.prototype.exe=function T(t,e){var s=g2.ifcof(t);if(s){var i=(e||this).cmds;if(this.state&&this.state.loading){requestAnimationFrame(T.bind(this,t,e))}else if(t&&i){var n=e&&e.state,r=g2.proxy[s](t);T[s].beg.call(r,this);if(e)e.state=this.state;for(var o=0,h=i.length,a;o<h;o++)if((a=i[o]).c[s])a.c[s].apply(r,a.a);if(e)e.state=n;T[s].end.call(r,this)}}return this};g2.prototype.cpy=function M(t){if(t!==this)t.cmds.forEach(function(t,e){if(e)this.cmds.push(t)},this);return this};g2.prototype.pntToUsr=function D(t,e,s){var i=this.state&&this.state.trf0||false;return!i?{x:t,y:e}:this.state.cartesian?{x:(t-i.x)/i.scl,y:-(e-(s-i.y))/i.scl}:{x:(t-i.x)/i.scl,y:(e-i.y)/i.scl}};g2.prototype.vecToUsr=function E(t,e){var s=this.state&&this.state.trf0||false;return!s?{x:t,y:e}:this.state.cartesian?{x:t/s.scl,y:-e/s.scl}:{x:t/s.scl,y:e/s.scl}};g2.prototype.dump=function(t){function e(t){var s=[],i,n,r,o,h;for(var a=0,c=t.cmds.length;a<c;a++){h=[];n=t.cmds[a];r=n.a;for(var f=0,p=r&&r.length||0;f<p;f++){if(typeof r[f]==="object"&&r[f]instanceof g2){if(r[f]!==t)h.push(e(r[f]))}else if(r[f]!==undefined)h.push(r[f])}o=/\W*function\s+([\w\$]+)\(/.exec(n.c.toString())[1];if(h.length){i={};i[o]=h}else i=o;s.push(i)}return s}return JSON.stringify(e(this),undefined,t)};g2.version="2.0.0";g2.transparent="rgba(0, 0, 0, 0)";g2.exeStack=0;g2.proxy=Object.create(null);g2.ifc=Object.create(null);g2.ifcof=function(t){for(var e in g2.ifc)if(g2.ifc[e](t))return e;return false};g2.State={create:function(){var t=Object.create(this.prototype);t.constructor.apply(t,arguments);return t},prototype:{constructor:function(){this.stack=[{}];this._current={};this.trf0={x:0,y:0,w:0,scl:1};this.loading=0;this.loadHdl=[]},beg:function(t){this.ifc=g2.ifcof(this.ctx=t);this.stack=[{}];this._current={}},end:function(){delete this.ctx;delete this.ifc},get:function(t){return t in this?this[t]:this._current[t]||g2.State[t]},set:function(t,e){this._current[t]=e},add:function(t){var e=g2.State[this.ifc],s,i,n={};for(var r in t){i=t[r];if(typeof i==="string"&&i[0]==="@")i=this.get(i.substr(1));if(r==="x"||r==="y"||r==="scl"||r==="w")n[r]=i;else if(!(r in this._current)||i!==this._current[r]){this._current[r]=i;if(e[r])e[r].call(this.ctx,i,this)}}if(Object.keys(n).length){this.trf=n;if(e["trf"])e["trf"].call(this.ctx,n,this)}},save:function(){this.stack.push(Object.assign({},this._current));return this},restore:function(){this._current=Object.assign({},this.stack.pop());return this},get current(){return this._current},set current(t){this._current=t},get trf(){return this._current.trf||this.trf0},set trf(t){var e=t.w||0,s=t.scl||1,i=s*(e?Math.sin(e):0),n=s*(e?Math.cos(e):1),r=this._current.trf||this.trf0;this._current.trf={x:n*r.x-i*r.y+(t.x||0),y:i*r.x+n*r.y+(t.y||0),w:r.w+e,scl:r.scl*s}},get cssFont(){var t=this.get("fos"),e=this.get("fow");return(t==="normal"?"":t+" ")+(e==="normal"?"":e+" ")+(this.get("foz")+"px "+this.get("fof"))},onload:function R(t){this.loadHdl.push(t)},loaded:function z(){if(--this.loading===0){while(this.loadHdl.length)this.loadHdl.pop()()}}},fs:g2.transparent,ls:"#000",lw:1,lc:"butt",lj:"miter",lwnosc:false,ml:10,sh:[0,0,0,g2.transparent],foc:"#000",fos:"normal",fow:"normal",foz:12,fof:"serif",foznosc:false,trf:{x:0,y:0,w:0,scl:1}};g2.symbol=Object.create(null);g2.symbolNameOf=function(t){for(var e in g2.symbol)if(g2.symbol[e]===t)return e;return false};if(typeof module==="object"&&module.exports)module.exports=g2;/**
 * @fileoverview g2.c2d.js
 * @author Stefan Goessner (c) 2013-16
 * @license MIT License
 */
g2.ifc.c2d=function(t){return t instanceof CanvasRenderingContext2D};g2.proxy.c2d=function(t){return t};g2.prototype.exe.c2d={beg:function(t){if(g2.exeStack++===0){var e=(this.g2_owner=t).state,s=e.trf;e.beg(this);this.setTransform(s.scl,0,0,e.cartesian?-s.scl:s.scl,s.x+.5,(e.cartesian?this.canvas.height-s.y:s.y)+.5);this.lineWidth=1;this.strokeStyle="#000";this.setLineDash([]);this.font=e.cssFont;this.fillStyle=g2.transparent}},end:function(){if(--g2.exeStack===0){this.fillStyle="#000000";this.g2_owner.state.end(this);delete this.g2_owner}}};g2.prototype.p.c2d=CanvasRenderingContext2D.prototype.beginPath;g2.prototype.m.c2d=CanvasRenderingContext2D.prototype.moveTo;g2.prototype.l.c2d=CanvasRenderingContext2D.prototype.lineTo;g2.prototype.q.c2d=CanvasRenderingContext2D.prototype.quadraticCurveTo;g2.prototype.c.c2d=CanvasRenderingContext2D.prototype.bezierCurveTo;g2.prototype.a.c2d=CanvasRenderingContext2D.prototype.arc;g2.prototype.z.c2d=CanvasRenderingContext2D.prototype.closePath;g2.prototype.stroke.c2d=function I(t,e){if(t){this.save();this.g2_owner.state.save().add(t)}if(e&&typeof Path2D!=="undefined")this.stroke(new Path2D(e));else this.stroke();if(t){this.g2_owner.state.restore();this.restore()}};g2.prototype.fill.c2d=function B(t,e){if(t){this.save();this.g2_owner.state.save().add(t)}if(e&&typeof Path2D!=="undefined")this.fill(new Path2D(e));else this.fill();if(t){this.g2_owner.state.restore();this.restore()}};g2.prototype.drw.c2d=function W(t,e){var s=e&&typeof Path2D!=="undefined"?new Path2D(e):false;if(t){this.save();this.g2_owner.state.save().add(t)}s?this.fill(s):this.fill();if(this.fillStyle!==g2.transparent&&this.shadowColor!==g2.transparent){var i=this.shadowColor;this.shadowColor="transparent";s?this.stroke(s):this.stroke();this.shadowColor=i}else s?this.stroke(s):this.stroke();if(t){this.g2_owner.state.restore();this.restore()}};g2.prototype.txt.c2d=function q(t,e,s,i,n){var r=this.g2_owner.state;this.save();if(n)r.save().add(n);if(i){var o=Math.sin(i),h=Math.cos(i);this.transform(h,o,-o,h,(1-h)*e+o*s,-o*e+(1-h)*s)}if(r.cartesian){this.scale(1,-1);s=-s}if(r.get("foc")!==g2.transparent){this.fillStyle=r.get("foc");this.fillText(t,e,s)}else{this.fillText(t,e,s);this.strokeText(t,e,s)}if(n)r.restore();this.restore()};g2.prototype.img.c2d=function H(t,e,s,i,n,r,o,h,a){var c=this.g2_owner.state.cartesian;i=i||t&&t.width;n=n||t&&t.height;if(c){this.scale(1,-1);s=-s-n}if(r||o||h||a)this.drawImage(t,r,o,h,a,e,s,i,n);else this.drawImage(t,e,s,i,n);if(c){this.scale(1,-1)}};g2.prototype.lin.c2d=function F(t,e,s,i,n){if(n){this.save();this.g2_owner.state.save().add(n)}this.beginPath();this.moveTo(t,e);this.lineTo(s,i);this.stroke();if(n){this.g2_owner.state.restore();this.restore()}};g2.prototype.rec.c2d=function N(t,e,s,i,n){if(n){this.save();this.g2_owner.state.save().add(n)}this.beginPath();this.rect(t,e,s,i);g2.prototype.drw.c2d.call(this);if(n){this.g2_owner.state.restore();this.restore()}};g2.prototype.cir.c2d=function G(t,e,s,i){if(i){this.save();this.g2_owner.state.save().add(i)}this.beginPath();this.arc(t,e,s,0,Math.PI*2,true);g2.prototype.drw.c2d.call(this);if(i){this.g2_owner.state.restore();this.restore()}};g2.prototype.arc.c2d=function L(t,e,s,i,n,r){if(r){this.save();this.g2_owner.state.save().add(r)}this.beginPath();this.arc(t,e,s,i,i+n,n<0);g2.prototype.drw.c2d.call(this);if(r){this.g2_owner.state.restore();this.restore()}};g2.prototype.ply.c2d=function Z(t,e,s,i){var n,r=0,o=e==="split";n=s(t,r++);if(!n.done){this.beginPath();this.moveTo(n.x,n.y);while(!(n=s(t,r++)).done){if(o&&r%2)this.moveTo(n.x,n.y);else this.lineTo(n.x,n.y)}if(e&&!o)this.closePath()}g2.prototype.drw.c2d.call(this,i);return r-1};g2.prototype.beg.c2d=function Q(t){this.save();this.g2_owner.state.save().add(t)};g2.prototype.end.c2d=function U(){this.g2_owner.state.restore();this.restore()};g2.prototype.clr.c2d=function V(){this.save();this.setTransform(1,0,0,1,0,0);this.clearRect(0,0,this.canvas.width,this.canvas.height);this.restore()};g2.prototype.grid.c2d=function Y(t,e){var s=this.g2_owner.state,i=s.trf0,n=this.canvas.width,r=this.canvas.height,o=e||g2.prototype.grid.getSize(s,i.scl),h=i.x?i.x%o-o:0,a=i.y?i.y%o-o:0;this.save();if(s.cartesian)this.setTransform(1,0,0,-1,.5,r-.5);else this.setTransform(1,0,0,1,.5,.5);this.strokeStyle=t||"#ccc";this.lineWidth=1;this.beginPath();for(var c=h,f=n+1;c<f;c+=o){this.moveTo(c,0);this.lineTo(c,r)}for(var p=a,u=r+1;p<u;p+=o){this.moveTo(0,p);this.lineTo(n,p)}this.stroke();this.restore()};g2.prototype.use.c2d=function J(t,e){var s=this.g2_owner;this.save();s.state.save().add(e);s.exe(this,t);s.state.restore();this.restore()};g2.prototype.style.c2d=function K(t){this.g2_owner.state.add(t)};g2.State.c2d={fs:function(t){this.fillStyle=t.indexOf&&t.indexOf("hatch(")===0?g2.State.c2d.hatch.call(this,t.substring(6,t.indexOf(")",7)).split(",")):t==="transparent"?g2.transparent:t},ls:function(t){this.strokeStyle=t.indexOf&&t.indexOf("hatch(")===0?g2.State.c2d.hatch.call(this,t.substring(6,t.indexOf(")",7)).split(",")):t==="transparent"?g2.transparent:t},lw:function(t,e){this.lineWidth=t/(e.get("lwnosc")?e.trf.scl:1)},lc:function(t){this.lineCap=t},lj:function(t){this.lineJoin=t},lo:function(t){this.lineDashOffset=t},ld:function(t,e){var s=e.get("lwnosc")?e.trf.scl:1;if(s!==1){var i=this.lineWidth*s,n=[];for(var r=0,o=t.length;r<o;r++)n.push(t[r]/i);this.setLineDash(n)}else this.setLineDash(t)},ml:function(t){this.miterLimit=t},sh:function(t){if(t&&t.length>1){this.shadowOffsetX=t[0];this.shadowOffsetY=t[1];this.shadowBlur=t[2]||0;this.shadowColor=t[3]||"rgba(0,0,0,0.5)"}},thal:function(t){this.textAlign=t},tval:function(t){this.textBaseline=t},fos:function(t,e){this.font=e.cssFont},fow:function(t,e){this.font=e.cssFont},foz:function(t,e){this.font=e.cssFont},fof:function(t,e){this.font=e.cssFont},lwnosc:function(t,e){if(t!==e.get("lwnosc")){if(t)this.lineWidth/=e.trf.scl;else this.lineWidth*=e.trf.scl}},trf:function(t){var e=t.scl||1,s=e*(t.w?Math.sin(t.w):0),i=e*(t.w?Math.cos(t.w):1);this.transform(i,s,-s,i,t.x||0,t.y||0)},matrix:function(t){this.transform.apply(this,t)},hatch:function X(t){console.log(t);var e=document.createElement("canvas").getContext("2d"),s=+t[3]||10,i=(s+1)*.5;e.canvas.width=e.canvas.height=s;e.fillStyle=t[1]||"white";e.fillRect(0,0,s,s);e.strokeStyle=t[0]||"black";e.lineWidth=+t[2]||1;e.lineCap="square";e.beginPath();e.moveTo(i,.5);e.lineTo(s+.5,i);e.moveTo(.5,i);e.lineTo(i,s+.5);e.stroke();return e.createPattern(e.canvas,"repeat")}};