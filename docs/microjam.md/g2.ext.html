<!doctype html>
  <html class="theme-light">
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, user-scalable=no">
  <meta name="description" content="g2.ext">
  <meta name="date" content="Mon Jun 01 2020 02:00:00 GMT+0200 (Central European Summer Time)">
  <meta name="keywords" content="">
  <title>g2.ext</title>
  <link rel="shortcut icon" type="image/png" href="../img/favicon.png">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.18.1/styles/vs2015.min.css">
  
  <link rel="stylesheet" href="../theme/styles.css">
  </head>
  <body id="top">
  <header>
  <a href="../index.html" class="right">g²</a>
  <a href="../microjam.md/g2.ext.html" class="left">Extension: g2.ext</a>
  <a href="https://github.com/goessner/g2"">
    <svg height="32" viewBox="0 0 16 16" width="32"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8C0 11.54 2.29 14.53 5.47 15.59C5.87 15.66 6.02 15.42 6.02 15.21C6.02 15.02 6.01 14.39 6.01 13.72C4 14.09 3.48 13.23 3.32 12.78C3.23 12.55 2.84 11.84 2.5 11.65C2.22 11.5 1.82 11.13 2.49 11.12C3.12 11.11 3.57 11.7 3.72 11.94C4.44 13.15 5.59 12.81 6.05 12.6C6.12 12.08 6.33 11.73 6.56 11.53C4.78 11.33 2.92 10.64 2.92 7.58C2.92 6.71 3.23 5.99 3.74 5.43C3.66 5.23 3.38 4.41 3.82 3.31C3.82 3.31 4.49 3.1 6.02 4.13C6.66 3.95 7.34 3.86 8.02 3.86C8.7 3.86 9.38 3.95 10.02 4.13C11.55 3.09 12.22 3.31 12.22 3.31C12.66 4.41 12.38 5.23 12.3 5.43C12.81 5.99 13.12 6.7 13.12 7.58C13.12 10.65 11.25 11.33 9.47 11.53C9.76 11.78 10.01 12.26 10.01 13.01C10.01 14.08 10 14.94 10 15.21C10 15.42 10.15 15.67 10.55 15.59C13.71 14.53 16 11.53 16 8C16 3.58 12.42 0 8 0Z"></path></svg>
  </a>
  </header>
  <main>
    <nav>
       <ul>
<li><a href="../microjam.md/Getting-Started.html">Getting started</a></li>
<li><a href="../microjam.md/Concepts.html">Concepts</a></li>
<li><a href="../microjam.md/Paths.html">Paths</a></li>
<li><a href="../microjam.md/Elements.html">Elements</a></li>
<li><a href="../microjam.md/State-and-Style.html">State and Style</a></li>
<li><a href="../microjam.md/Reuse.html">Reuse</a></li>
<li><a href="../microjam.md/View.html">View</a></li>
<li><a href="../microjam.md/Insert.html">Insert</a></li>
<li><a href="../microjam.md/Animation.html">Animation</a></li>
<li><a href="../microjam.md/Interactivity.html">Interactivity</a></li>
<li><a href="../microjam.md/g2.html.html">Custom HTML Element</a></li>
</ul>
<hr>
<ul>
<li><a href="../microjam.md/g2.ext.html">Extension: g2.ext</a></li>
<li><a href="../microjam.md/g2.mec.html">Extension: g2.mec</a></li>
<li><a href="../microjam.md/g2.chart.html">Extension: g2.chart</a></li>
</ul>
<hr>
<ul>
<li><a href="../api/g2.core">API: g2.core</a></li>
<li><a href="../api/g2.ext">API: g2.ext</a></li>
<li><a href="../api/g2.mec">API: g2.mec</a></li>
<li><a href="../api/g2.chart">API: g2.chart</a></li>
</ul>
<hr>
<ul>
<li><a href="../tests.html">Tests</a></li>
</ul>

    </nav>
    <article>
  <h1 id="g2extjs">g2.ext.js <a class="plnk" href="#g2extjs">#</a></h1>
<p><a href="https://github.com/goessner/g2/blob/master/docs/api/g2.ext.md">See the API Reference</a></p>
<h3 id="g2-extension-for-expanded-functionality">g2 extension for expanded functionality <a class="plnk" href="#g2-extension-for-expanded-functionality">#</a></h3>
<p>g2.ext adds properties that can be used on standard g2 elements, which is used in extensions like <code>label</code> and <code>mark</code>, as well as in other extensions like <code>g2.mec.js</code>.</p>
<h4 id="get-the-length-of-a-line-in-label">get the length of a line in <code>label</code> <a class="plnk" href="#get-the-length-of-a-line-in-label">#</a></h4>
<pre><code class="code-line language-javascript"><div>    g2().view({<span class="hljs-attr">cartesian</span>:<span class="hljs-literal">true</span>})
        .lin({<span class="hljs-attr">x1</span>:<span class="hljs-number">10</span>,<span class="hljs-attr">y1</span>:<span class="hljs-number">10</span>,<span class="hljs-attr">x2</span>:<span class="hljs-number">90</span>,<span class="hljs-attr">y2</span>:<span class="hljs-number">90</span>,<span class="hljs-attr">ld</span>:[<span class="hljs-number">6</span>,<span class="hljs-number">3</span>], <span class="hljs-attr">label</span>:<span class="hljs-string">`@len`</span>})
</div></code></pre>
<p><img src="../img/get-len.png" alt="label" class="loading" id="image-hash-697540647"></p>
<p>How <code>label</code> works is shown further below on this page.</p>
<h3 id="splines">Splines <a class="plnk" href="#splines">#</a></h3>
<p>g2.ext.js introduces a new method that draws splines by points by
implementing a centripetal Catmull-Rom spline (thus avoiding cusps and self-intersections).</p>
<p>The <code>spline</code> command expects an object with a <code>pts</code> property analogous to the
<a href="https://github.com/goessner/g2/wiki/Elements#ply-element">ply</a> method from g2.js.
This property can have different formats, for each of which there must be provided an individual
array iterator. <em>g2</em> implements three standard iterators which need not be specified by the last <code>itr</code> argument.</p>
<table>
<thead>
<tr>
<th>Property Format</th>
<th>comment</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>{pts:[x1,y1,x2,y2,...,xn,yn]}</code></td>
<td>Flat array of <code>x</code> and <code>y</code> values [default].</td>
</tr>
<tr>
<td><code>{pts:[[x1,y1],[x2,y2],...,[xn,yn]]}</code></td>
<td>Array of arrays of <code>x</code> and <code>y</code> values.</td>
</tr>
<tr>
<td><code>{pts:[{x:x1,y:y1},{x:x2,y:y2},...,{x:xn,y:yn}]}</code></td>
<td>Array of objects with <code>x</code> and <code>y</code> members.</td>
</tr>
</tbody>
</table>
<p>Another property of <code>string</code> is <code>closed</code> which can have boolean values <code>true</code> and <code>false</code>, which are interpreted as closed flags (also analogous to <code>ply</code>).</p>
<pre><code class="code-line language-javascript"><div>g2().style({<span class="hljs-attr">ls</span>:<span class="hljs-string">&quot;red&quot;</span>,<span class="hljs-attr">lw</span>:<span class="hljs-number">3</span>,<span class="hljs-attr">fs</span>:<span class="hljs-string">&quot;#ddd&quot;</span>})
    .spline([<span class="hljs-number">10</span>,<span class="hljs-number">10</span>,<span class="hljs-number">40</span>,<span class="hljs-number">70</span>,<span class="hljs-number">60</span>,<span class="hljs-number">30</span>,<span class="hljs-number">90</span>,<span class="hljs-number">80</span>])
    .spline([[<span class="hljs-number">110</span>,<span class="hljs-number">10</span>],[<span class="hljs-number">140</span>,<span class="hljs-number">70</span>],[<span class="hljs-number">160</span>,<span class="hljs-number">30</span>],[<span class="hljs-number">190</span>,<span class="hljs-number">80</span>]],<span class="hljs-literal">true</span>)
    .spline([{<span class="hljs-attr">x</span>:<span class="hljs-number">210</span>,<span class="hljs-attr">y</span>:<span class="hljs-number">10</span>},{<span class="hljs-attr">x</span>:<span class="hljs-number">240</span>,<span class="hljs-attr">y</span>:<span class="hljs-number">70</span>},{<span class="hljs-attr">x</span>:<span class="hljs-number">260</span>,<span class="hljs-attr">y</span>:<span class="hljs-number">30</span>},{<span class="hljs-attr">x</span>:<span class="hljs-number">290</span>,<span class="hljs-attr">y</span>:<span class="hljs-number">80</span>}],<span class="hljs-string">&#x27;split&#x27;</span>);
</div></code></pre>
<p><img src="../img/splines.png" alt="splines" class="loading" id="image-hash--1003891253"></p>
<p>Other resources on splines:</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Cubic_Hermite_spline">cubic hermite spline</a></li>
<li><a href="https://pomax.github.io/bezierinfo/">bézier curves</a></li>
</ul>
<h3 id="labels">Labels <a class="plnk" href="#labels">#</a></h3>
<p>If you want to add text to a geometric element, you can always use the basic <code>txt</code> element.
However, some element types support the smarter <code>label</code> property, which comes with a more intuitive relative positioning concerning its nearest previous element.
Reliable positioning always requires <em>cartesian</em> coordinates.</p>
<table>
<thead>
<tr>
<th style="text-align:center">Property</th>
<th style="text-align:center">Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>label: {str,loc,off}</code></td>
<td style="text-align:center">Label element placing string <code>str</code> at location <code>loc</code> using offset <code>off</code>.</td>
</tr>
<tr>
<td style="text-align:center"><code>label: str</code></td>
<td style="text-align:center">Same, but with <code>loc</code> set to <code>'se'</code> and off to <code>1</code>.</td>
</tr>
</tbody>
</table>
<p>Point-like and rectangular elements provide locations according to cardinal directions.Linear elements provide parameterized numerical or named locations.</p>
<table>
<thead>
<tr>
<th style="text-align:center">Type</th>
<th style="text-align:center">Elements</th>
<th style="text-align:center">default</th>
<th style="text-align:center">locations</th>
<th style="text-align:center">offset</th>
<th style="text-align:center">img</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Point elements</td>
<td style="text-align:center"><code>cir, use</code></td>
<td style="text-align:center"><code>c</code></td>
<td style="text-align:center"><code>c</code><br><code>e,ne,n,nw,w,sw,s,se</code><br>angle in [radians]</td>
<td style="text-align:center">number</td>
<td style="text-align:center"><img src="../img/point-label.png" alt="img.point-label.mec" class="loading" id="image-hash-1972741632"></td>
</tr>
<tr>
<td style="text-align:center">Rectangular elements</td>
<td style="text-align:center"><code>rec, slider</code></td>
<td style="text-align:center"><code>c</code></td>
<td style="text-align:center"><code>c</code><br><code>e,ne,n,nw,w,sw,s,se</code></td>
<td style="text-align:center">number</td>
<td style="text-align:center"><img src="../img/rec-label.png" alt="img.rec-label.mec" class="loading" id="image-hash--1294769024"></td>
</tr>
<tr>
<td style="text-align:center">Linear elements</td>
<td style="text-align:center"><code>lin, vec, dim</code><br><code>arc, adim</code><br><code>spring, damper</code><br> <code>bar, bar2</code></td>
<td style="text-align:center"><code>0.5</code></td>
<td style="text-align:center"><code>beg, mid, end</code><br> normalized numerical parameter</td>
<td style="text-align:center"><code>left, right</code><br>number</td>
<td style="text-align:center"><img src="../img/line-label.png" alt="line with labels" class="loading" id="image-hash-784309768"></td>
</tr>
<tr>
<td style="text-align:center">Polygonial elements</td>
<td style="text-align:center"><code>ply, ground</code><br><code>link, link2</code></td>
<td style="text-align:center"><code>0.5</code></td>
<td style="text-align:center"><code>beg, end</code><br> <code>#index</code> <br> normalized numerical parameter</td>
<td style="text-align:center"><code>left, right</code><br>number</td>
<td style="text-align:center"><img src="../img/poly-label.mec.png" alt="polygon with labels" class="loading" id="image-hash--196831811"></td>
</tr>
<tr>
<td style="text-align:center">Spline element</td>
<td style="text-align:center"><code>spline</code></td>
<td style="text-align:center"><code>beg</code></td>
<td style="text-align:center"><code>beg, end</code><br> <code>#index</code></td>
<td style="text-align:center"><code>left, right</code><br>number</td>
<td style="text-align:center"><img src="../img/spline-label.png" alt="spline with labels" class="loading" id="image-hash--834965211"></td>
</tr>
</tbody>
</table>
<p>A numerical offset always means <em>outside</em> of closed shapes with regard to the specified point.
With linear, polygonial and spline elements a positive value means <em>right of</em> and a negativ value means <em>left of</em>
the line at the specified point. If there is no offset distance specified, the global <code>g2.State.labelOffset</code>'s value is taken. Please note, that cardinal locations are not sensitive to transformations.</p>
<h3 id="markers">Markers <a class="plnk" href="#markers">#</a></h3>
<p>Markers can be placed onto the outline of the previous element.</p>
<table>
<thead>
<tr>
<th style="text-align:center">Element</th>
<th style="text-align:center">Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>mark({mark,loc||count})</code></td>
<td style="text-align:center">Marker element placing marker symbol <code>mrk</code> at locations <code>loc</code>. If <code>count</code> is given instead of <code>loc</code>, the marks are distributed evenly on the respective element.</td>
</tr>
</tbody>
</table>
<p>Elements with a unique center and rectangular elements provide locations according to the cardinal directions.
Linear elements provide parameterized numerical or named locations.
The <code>spline</code> element only supports indexed locations.
It does not support parameterized locations.</p>
<p>Locations can also be passed as arrays, which makes it convenient for multiple marks with the same <code>mark</code> to be just passed in one calling of the mark method e.g <code>mark({mark:&quot;tick&quot;,loc:[0,0.25,&quot;mid&quot;,0.9]})</code></p>
<table>
<thead>
<tr>
<th style="text-align:center">Type</th>
<th style="text-align:center">Elements</th>
<th style="text-align:center">default</th>
<th style="text-align:center">locations</th>
<th style="text-align:center">dir</th>
<th style="text-align:center">img</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Centered elements</td>
<td style="text-align:center"><code>cir</code></td>
<td style="text-align:center"><code>c</code></td>
<td style="text-align:center"><code>c</code><br><code>e,ne,n,nw,w,sw,s,se</code><br>normalized parameter</td>
<td style="text-align:center"><code>-1,0,1</code></td>
<td style="text-align:center"><img src="../img/point-marker.png" alt="circular markers" class="loading" id="image-hash--460384572"></td>
</tr>
<tr>
<td style="text-align:center">Rectangular elements</td>
<td style="text-align:center"><code>rec, slider</code></td>
<td style="text-align:center"><code>c</code></td>
<td style="text-align:center"><code>c</code><br><code>e,ne,n,nw,w,sw,s,se</code></td>
<td style="text-align:center"><code>-1,0,1</code></td>
<td style="text-align:center"><img src="../img/rec-marker.png" alt="rectangular markers" class="loading" id="image-hash-1326000196"></td>
</tr>
<tr>
<td style="text-align:center">Linear elements</td>
<td style="text-align:center"><code>lin, vec, dim</code><br><code>arc, avec, adim</code><br><code>spring, damper</code><br> <code>bar, bar2</code></td>
<td style="text-align:center"><code>0.5</code></td>
<td style="text-align:center"><code>beg, mid, end</code><br> normalized numerical parameter</td>
<td style="text-align:center"><code>-1,0,1</code></td>
<td style="text-align:center"><img src="../img/lin-marker.png" alt="linear markers" class="loading" id="image-hash-310682531"></td>
</tr>
<tr>
<td style="text-align:center">Polygonial elements</td>
<td style="text-align:center"><code>ply, ground</code><br><code>link, link2</code></td>
<td style="text-align:center"><code>0.5</code></td>
<td style="text-align:center"><code>beg, end, mid, all</code><br> <code>#index</code> <br> normalized numerical parameter</td>
<td style="text-align:center"><code>-1,0,1</code></td>
<td style="text-align:center"><img src="../img/poly-markers.png" alt="polygonial markers" class="loading" id="image-hash-1199249829"></td>
</tr>
<tr>
<td style="text-align:center">Spline element</td>
<td style="text-align:center"><code>spline</code></td>
<td style="text-align:center"><code>beg</code></td>
<td style="text-align:center"><code>beg, end, mid, all</code><br> <code>#index</code></td>
<td style="text-align:center"><code>-1,0,1</code></td>
<td style="text-align:center"><img src="../img/spline-markers.png" alt="spline markers" class="loading" id="image-hash-2002892202"></td>
</tr>
</tbody>
</table>
<h3 id="symbols">Symbols <a class="plnk" href="#symbols">#</a></h3>
<p><img src="../img/symbols.png" alt="img.symbols.mec" class="loading" id="image-hash-1488137316"></p>
<p>These symbols expect <code>cartesian</code> mode to be true, notable when using <code>nodfix</code>, <code>nodflt</code> and <code>origin</code>.</p>
<p>Some useful symbols implemented into <code>g2.ext.js</code> are:</p>
<table>
<thead>
<tr>
<th>Element</th>
<th>Image</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>pol({x,y})</code></td>
<td><img src="../img/pol-2.png" alt="pol-def" class="loading" id="image-hash--1555505349"></td>
<td>Creates a pol symbol.</td>
</tr>
<tr>
<td><code>gnd({x,y})</code></td>
<td><img src="../img/gnd.png" alt="gnd-def" class="loading" id="image-hash--1263074074"></td>
<td>Creates a gnd symbol.</td>
</tr>
<tr>
<td><code>nod({x,y})</code></td>
<td><img src="../img/nod.png" alt="nod-def" class="loading" id="image-hash-683113548"></td>
<td>Creates a nod symbol.</td>
</tr>
<tr>
<td><code>dblnod({x,y})</code></td>
<td><img src="../img/dblnod.png" alt="dblnod-def" class="loading" id="image-hash--1538277758"></td>
<td>Creates a dblnod symbol.</td>
</tr>
<tr>
<td><code>nodfix({x,y})</code></td>
<td><img src="../img/nodfix.png" alt="nodfix-def" class="loading" id="image-hash--951497185"></td>
<td>Creates a nodfix symbol.</td>
</tr>
<tr>
<td><code>nodflt({x,y})</code></td>
<td><img src="../img/nodflt.png" alt="nodflt-def" class="loading" id="image-hash--869303816"></td>
<td>Creates a nodflt symbol.</td>
</tr>
<tr>
<td><code>origin({x,y})</code></td>
<td><img src="../img/origin_sym.png" alt="origin-def" class="loading" id="image-hash-2042321627"></td>
<td>Creates a origin symbol.</td>
</tr>
</tbody>
</table>
<h3 id="helpful-elements">Helpful elements <a class="plnk" href="#helpful-elements">#</a></h3>
<p><code>g2.ext.js</code> also provides some extra elements that are based on <code>core</code> elements:</p>
<table>
<thead>
<tr>
<th>Element</th>
<th>Image</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>vec({x1,y1,x2,y2})</code></td>
<td><img src="../img/vec-def.png" alt="vec-def" class="loading" id="image-hash-1657545813"></td>
<td>Linear vector element which starts at <code>x1, y1</code> and points to <code>x2, y2</code>.</td>
</tr>
<tr>
<td><code>avec({x,y,r,w,dw})</code></td>
<td><img src="../img/avec-def.png" alt="avec-def" class="loading" id="image-hash--497846920"></td>
<td>Angular vector element with center at <code>x, y</code>, radius <code>r</code> and spans a vectro from <code>w</code> to <code>w+dw</code>.</td>
</tr>
<tr>
<td><code>dim({x1,y1,x2,y2,inside})</code></td>
<td><img src="../img/dim-def.png" alt="dim-def" class="loading" id="image-hash--2037797559"></td>
<td>Linear dimension element which starts at <code>x1, y1</code> and points to <code>x2, y2</code>.</td>
</tr>
<tr>
<td><code>adim({x,y,r,w,dw,inside})</code></td>
<td><img src="../img/adim-def.png" alt="adim-def" class="loading" id="image-hash-101777004"></td>
<td>Arc dimension element by center coordinates <code>x</code>, <code>y</code>, radius <code>r</code>, start angle <code>w</code> and angular range <code>dw</code>.</td>
</tr>
</tbody>
</table>
<h3 id="styles">Styles <a class="plnk" href="#styles">#</a></h3>
<p>There are some predefined colors, line styles and other constants.
They can be overwritten if needed.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>State</td>
<td><code>object</code></td>
<td></td>
<td><code>g2</code> state namespace.</td>
</tr>
<tr>
<td>State.nodcolor</td>
<td><code>string</code></td>
<td><code>&quot;#333&quot;</code></td>
<td>node color.</td>
</tr>
<tr>
<td>State.nodfill</td>
<td><code>string</code></td>
<td><code>&quot;#dedede&quot;</code></td>
<td>node fill color.</td>
</tr>
<tr>
<td>State.nodfill2</td>
<td><code>string</code></td>
<td><code>&quot;#aeaeae&quot;</code></td>
<td>alternate node fill color, somewhat darker.</td>
</tr>
<tr>
<td>State.linkcolor</td>
<td><code>string</code></td>
<td><code>&quot;#666&quot;</code></td>
<td>link color.</td>
</tr>
<tr>
<td>State.linkfill</td>
<td><code>string</code></td>
<td><code>&quot;rgba(200,200,200,0.5)&quot;</code></td>
<td>link fill color, semi-transparent.</td>
</tr>
<tr>
<td>State.solid</td>
<td><code>array</code></td>
<td><code>[]</code></td>
<td>solid line style.</td>
</tr>
<tr>
<td>State.dash</td>
<td><code>array</code></td>
<td><code>[15,10]</code></td>
<td>dashed line style.</td>
</tr>
<tr>
<td>State.dot</td>
<td><code>array</code></td>
<td><code>[4,4]</code></td>
<td>dotted line style.</td>
</tr>
<tr>
<td>State.dashdot</td>
<td><code>array</code></td>
<td><code>[25,6.5,2,6.5]</code></td>
<td>dashdotted line style.</td>
</tr>
<tr>
<td>State.labelOffset</td>
<td><code>number</code></td>
<td><code>5</code></td>
<td>default label offset distance.</td>
</tr>
<tr>
<td>State.labelSignificantDigits</td>
<td><code>number</code></td>
<td><code>3</code></td>
<td>default label's significant digits after floating point.</td>
</tr>
</tbody>
</table>

    </article>
  </main>
  <footer>
    <span class="left">&copy; goessner</span>
    <span class="center">powered by &mu;Jam &amp; VSCode &mdash; hosted by GitHub</span>
    <span class="right" onclick="document.documentElement.className = document.documentElement.className === 'theme-dark' ? 'theme-light' : 'theme-dark';">&#9788;</span>
  </footer>
  </body>
  </html>