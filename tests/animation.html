<!DOCTYPE html>
<html>
    <head>
        <title>Hello g2!</title>
        <meta charset="UTF-8" />
    </head>
    <body>
        <canvas id="canvas" width="201" height="241" style="border:1px solid black;"></canvas>
        <script src='../g2.js'></script>

        <script>
		
var ctx = document.getElementById("canvas").getContext("2d");  // Grab canvas context.
var numberOfRaindrops = 10,
    raindrops = [],
	 lastRefresh,
	 speed = 100,
    g_rd = g2();
	 g = g2().clr().grid().style("lw",8,"ls","#30833a","fs","#73df80","lj","round")  // static single umbrella ...
	   .p().m(100,70).l(100,210).a(-3.14,130,210).stroke()
		.p().m(10,140).a(1,70,140).a(1,130,140).a(1,190,140).a(-2.3,10,140).z().drw()
      .style("ls","#0600ff","lw",8,"lc","round").use(g_rd);

function randomX() { return Math.random() * (170 - 30) + 30; }
function randomY() { return Math.random() * -120; }
function updateRaindrops(g,dy) {
   g.del();
	for (var i=0; i<numberOfRaindrops; i++) {
		raindrops[i].y += dy;
		if (raindrops[i].y > 110) {
			raindrops[i].y = randomY();
			raindrops[i].x = randomX();
		}
      g.lin(raindrops[i].x,raindrops[i].y-5,raindrops[i].x,raindrops[i].y);
   }
}
function step(time) {
   updateRaindrops(g_rd,(time - lastRefresh || 0) * speed / 1000);
	lastRefresh = time;
	g.exe(ctx);
	window.requestAnimationFrame(step);
}

for (var i = 0; i<numberOfRaindrops; i++) {  // create raindrops ...
   raindrops.push({x:randomX(), y:randomY()});
}
window.requestAnimationFrame(step);  // start animation ..

        </script>
    </body>
</html>
