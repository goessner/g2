<!doctype html>
<html>
<head>
    <meta charset='utf-8'>
    <title>g2 - wheel zoom</title>
    <style> canvas { border: 1px solid #000; } </style>
</head>

<body>
    <h1>g2 - wheel zoom</h1>
    <canvas id="c" width="500", height="300"></canvas>
    <script src='../g2.js'></script>
    <script>
      var ctx = document.getElementById("c").getContext("2d"),
          rec = ctx.canvas.getBoundingClientRect(),
          g = g2({cartesian:true}).clr().grid().use("origin").txt("origin",10,10)
                .lin(20,30,80,130).lin(80,30,20,130).cir(50,80,4);
          onwheel = function(e) { 
             var delta = Math.max(-1,Math.min(1,e.deltaY||e.wheelDelta)),
                 x = e.clientX - Math.floor(rec.left),
                 y = e.clientY - Math.floor(rec.top);
             if (g.state.cartesian)
                y = rec.height - y;
             g.zoom(delta>0?9/10:10/9,x,y);
             e.preventDefault(); 
             return false; 
          },
          render = function render() { g.exe(ctx); requestAnimationFrame(render); };

      ctx.canvas.addEventListener("wheel", onwheel, false);
      render();
   </script>
</body>
</html>